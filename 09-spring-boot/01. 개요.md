# 스프링 부트
- 스프링 부트는 스프링 프레임워크의 오픈소스 확장 기능이다.
- 스프링 부트는 스프링 기반으로 실제 현장에서 사용할 수 있는 제품 수준의 독립 실행형 애플리케이션을 복잡한 설정에 대한 걱정 없이 쉽게 만들 수 있게 해준다.

## 스프링 부트의 핵심 기능
- 빠른 시동
  + 스프링 애플리케이션 개발을 빨리 시작할 수 있게 만든다.
- 자동 구성(Auto Cofiguration)
  + 스프링 부트는 클래스 패스에 있는 여러 가지 설정 파일에 지정된 프로퍼티 정보를 바탕으로 스프링 애플리케이션에 필요한 최소한의 컴포넌트를 알아서 자동으로 구성해준다.
- 미리 정의된 방식(Opinionated)
  + 스프링 부트는 애플리케이션을 실행할 때 필요한 몇 가지 컴포넌트를 스타터 의존 관계를 기준으로 자동으로 구성한다.
  + 스타터 의존 관계는 애플리케이션 개발의 특정 영역을 대상으로 관련된 의존 관계를 포함하고 있다.
- 독립 실행형(Standalone)
  + 스프링 부트 애플리케이션은 웹 서버를 내장하고 있어서 외부 웹 서버나 애플리케이션 서버 없이도 독립적으로 설치되어 실행할 수 있다.
  + 스프링 부트 애플리케이션은 실행 가능한 JAR 파일로 패키징 되어 java -jar 명령으로 간단하게 실행할 수 있다.
  + 스프링 부트 애플리케이션은 쉽게 컨테이너화될 수 있고 클라우드 네이티브 애플리케이션 개발에도 적합하다.
- 실제 서비스 환경에 사용 가능(Production-ready)
  + 스프링 부트에는 헬스 체크, 스레드 덤프를 수행하고 기타 유횽한 측정지표를 보여주는 기능이 포함돼 있어서, 실제 서비스 환경에 배포된 애플리케이션 모니터링이나 유지 관리를 손쉽게 수행할 수 있다.
 
## 스프링 부트 시작하기
- 스프링 이니셜라이저(Spring Initializer)를 사용하면 스프링 부트 프로젝트를 쉽게 생성할 수 있다.

### 스프링 부트 프로젝트 구조
- 스프링 이니셜라이저를 통해 자동 생성된 스프링 부트 프로젝트 구조는 상대적으로 단순하며, 스프링 부트 애플리케이션 개발을 시작하는데 필요한 최소한의 컴포넌트 만으로 구성된다.
- 스프링 부트 프로젝트 프로젝트 생성 시 지정한 의존 관계가 들어 있는 pom.xml 파일
- 메이븐을 로컬 컴퓨터에 설치하지 않고도 프로젝트를 빌드할 수 있게 해주는 메이븐 래퍼(Maven wrapper)
- 소스 코드와 테스트 코드를 분리해서 담고 있는 패키지 구조
- application.properties 파일이 들어있는 리소스 폴더

### 메이븐 pom.xml 파일
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.4"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <!--
    이 프로젝트가 스프링 부트 프로젝트의 하위 프로젝트임을 나타내기 위해 spring-boot-starter-parent를 지정한다.
    애플리케이션에 사용할 플러그인이나 의존 관계 관리를 스프링 부트에게 위임할 수 있다.
  -->
  <parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.6.3</version>
    <relativePath />
  </parent>

  <!--
    프로젝트 아티팩트 정보
  -->
  <groupId>com.sample</groupId>
  <artifactId>spring-boot-app-demo</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>spring-boot-app-demo</name>

  <properties>
    <java.version>17</version>
  </properties>

  <!--
    메이븐 의존 관계 목록
  -->
  <dependencies>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-test</artifactId>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <!--
        스프링 부트 메이븐 플러그인은 여러 가지 애플리케이션 관리 활동을 도와주는 플러그인이다.
      -->
      <plugin>
        <groupId>org.springframework.boot</groupId>
        <aritifactId>spring-boot-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project>
```

### 스프링 부트 메인 클래스
```java
package com.sample.demo;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autocinfigure.SpringBootApplication;

@SpringBootApplication
public class SpringBootAppDemoApplication {
  public static void main(String[] args) {
    SpringApplication.run(SpringBootAppDemoApplication.class, args);
  }
}
```

- @SpringBootApplication
@EnableAutoConfiguration, @ComponentScan, @SpringBootConfiguration  3개의 애너테이션을 포함하고 있다.

  + @EnableAutoConfiguration
     * 스프링 부트에는 @Enable로 시작하는 여러 가지 애너테이션이 있다.
     * @EnableAutoConfiguration은 애플리케이션 클래스 패스에 있는 JAR파일을 바탕으로 애플리케이션을 자동으로 구성해주는 스프링 부트 자동 구성 기능을 활성화한다.
  + @ComponentScan
    * 애플리케이션에 있는 스프링 컴포넌트를 탐색해서 찾아낸다. 스프링 컴포넌트는 @Component, @Bean 등이 붙어 있는 자바 빈으로서 스프링으로 관리한다.
    * @ComponentScan 애너테이션이 붙어 있으며 스프링 부트 애플리케이션은 애너테이션이 지정한 디렉토리와 그 하위 디렉토리를 모두 탐색해서 스프링 컴포넌트를 찾아내고, 라이프사이클을 관리한다.
  + @SpringBootConfiguration
    * 스프링 부트 애플리케이션 설정을 담당하는 클래스에 이 애너테이션을 붙인다.
    * 내부적으로 @Configuration을 포함하고 있어서 이 설정 클래스는 스프링 부트 컴포넌트 탐색으로 발견되며 이 클래스안에서 정의된 빈도 스프링으로 발견해 로딩된다. 결과적으로 이러한 빈을 통해 애플리케이션 설정 과정에 참여한다.
- main() 메소드가 실행될 때 수행하는 작업
  1. 클래스패스에 있는 라이브러리를 기준으로 ApplicationContext 클래스 인스턴스를 생성한다.
  2. CommandLinePropertySource를 등록해서 명령행 인자를 스프링 프로퍼티로 읽어 들인다.
  3. 앞의 1단계에서 생성한 ApplicationContext를 통해 모든 싱클턴 빈을 로딩한다.
  4. 애플리케이션에 설정된 ApplicationRunners와 CommandRunners를 실행한다.

### 애플리케이션 설정 정보 관리
스프링 이니셜라이저는 비어 있는 application.properties 파일을 src/main/resources 폴더에 생성한다. 이 파일을 통해 서버 접속 정보나 데이터베이스 접속 정보 같은 여러 애플리케이션 설정 정보를 소스 코드로부터 분리해서 외부화할 수 있다.

- application.properties 예
```properties
server.address=localhost
server.port=8081
management.endpoints.web.exposure.include=*
```

- application.yml 예
```yml
server:
  address: localhost
  port: 8081
management:
  endpoints:
    web:
      exposure:
        include: *
```


### 

